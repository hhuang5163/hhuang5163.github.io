---
layout: default
title: Discover
navbar_title: Discover
---

<div class="container py-5 text-center">
  <h1 class="mb-3">Discover My Work</h1>
  <p class="lead text-muted mb-4">
    Click the button or turn the knob to reveal a short highlight from my research or interests!
  </p>

    <div class="d-flex justify-content-center">
        <div id="gacha-wrapper" class="position-relative" style="width: 300px;">
            <img id="machine-img"
                src="/assets/images/discover/gachapon_machine_no_knob.png"
                alt="Gachapon Machine"
                class="img-fluid w-100 h-100">

            <div id="capsule-container"
                class="position-absolute">
                <img src="/assets/images/discover/capsule1.png" class="capsule position-absolute" style="left: 0%; top: 80%;">
                <img src="/assets/images/discover/capsule1.png" class="capsule position-absolute" style="left: 50%; top: 80%;">
                <img src="/assets/images/discover/capsule1.png" class="capsule position-absolute" style="left: 70%; top: 80%;">
            </div>

            <img id="knob-img"
                src="/assets/images/discover/gachapon_knob.png"
                alt="Knob"
                class="position-absolute knob-img">
        </div>
    </div>

  <div class="mt-4">
    <button id="roll-btn" class="btn btn-primary">Roll!</button>
  </div>

  {% include widgets/fact_modal.html %}
</div>

<style>
  #gacha-wrapper {
    max-width: 300px;
  }

  #capsule-container {
    width: 60%;
    height: 28%;
    top: 75px;
    left: 20%;
    z-index: 2;
    /* border: 2px dashed red;  */
    pointer-events: none; 
  }

  .knob-img {
    width: 89px;
    height: 89px;
    bottom: 117.5px;
    left: 50%;
    z-index: 3;
    transform: translateX(-50%);
    transition: transform 0.3s ease-in-out;
  }

  .spin {
    animation: knob-spin 0.4s ease-in-out;
  }

  @keyframes knob-spin {
    0%   { transform: translateX(-50%) rotate(0deg); }
    50%  { transform: translateX(-50%) rotate(45deg); }
    100% { transform: translateX(-50%) rotate(0deg); }
  }

  .capsule {
    width: 30px;
    height: auto;
    transition: transform 0.3s ease;
  }

  .capsule.jump {
    animation: jump 0.4s ease;
  }

  @keyframes jump {
    0%   { transform: translateY(0); }
    50%  { transform: translateY(-15px); }
    100% { transform: translateY(0); }
  }
</style>

<script>
  const facts = {{ site.data.facts | jsonify }};
  
  function rollCapsule() {
    // Animate knob
    const knob = document.getElementById('knob-img');
    knob.classList.add('spin');
    setTimeout(() => knob.classList.remove('spin'), 400);

    // Animate capsule bounce
    const capsules = document.querySelectorAll('.capsule');
    capsules.forEach((capsule) => {
      capsule.classList.add('jump');
      setTimeout(() => capsule.classList.remove('jump'), 400);
    });

    setTimeout(() => {
      const randomFact = facts[Math.floor(Math.random() * facts.length)];

      // Update modal title
      document.getElementById('factModalLabel').innerText = randomFact.category || 'Fun Fact';

      // Compose modal content
      let modalContent = `
        <p class="h5 font-weight-bold">${randomFact.fact}</p>
        <p class="text-muted"><small>${randomFact.subtext}</small></p>
      `;

      if (randomFact.image) {
        modalContent += `<img src="${randomFact.image}" alt="related image" class="img-fluid mt-2" style="max-height: 200px;">`;
      }

      document.getElementById('modal-fact-body').innerHTML = modalContent;

      const factModal = new bootstrap.Modal(document.getElementById('factModal'));
      factModal.show();
  }, 500);

    // // Wait, then show modal
    // setTimeout(() => {
    //   const randomFact = facts[Math.floor(Math.random() * facts.length)];

    //   let modalContent = `
    //     <p><strong>${randomFact.fact}</strong></p>
    //     <p><small>${randomFact.subtext}</small></p>
    //   `;

    //   if (randomFact.image) {
    //     modalContent += `<img src="${randomFact.image}" alt="related image" class="img-fluid mt-2" style="max-height: 200px;">`;
    //   }

    //   document.getElementById('modal-fact-body').innerHTML = modalContent;

    //   // Use Bootstrapâ€™s modal API to show it
    //   const factModal = new bootstrap.Modal(document.getElementById('factModal'));
    //   factModal.show();
    // }, 500);

    // // Show fact capsule
    // document.getElementById('capsule').classList.add('d-none');
    // setTimeout(() => {
    //   const randomFact = facts[Math.floor(Math.random() * facts.length)];
    //   document.getElementById('fact').innerHTML = `
    //     <strong>${randomFact.fact}</strong><br>
    //     <small>${randomFact.subtext}</small>
    //   `;

    // //   <img src="${randomFact.image}" alt="related image" style="max-height: 100px; margin-top: 10px;">
    //   document.getElementById('capsule').classList.remove('d-none');
    // }, 500);
  };

  document.getElementById('roll-btn').onclick = rollCapsule;
  document.getElementById('knob-img').onclick = rollCapsule;
</script>
